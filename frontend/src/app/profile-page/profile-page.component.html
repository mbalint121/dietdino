<app-page-navbar></app-page-navbar>
@if(!loading){
    <div class="w-[90%] mx-auto h-4">
            @if(this.route.snapshot.url[1] == undefined || this.route.snapshot.url[1]!.path == this.userService.GetUsername()){
                <h1 class="text-3xl font-semibold text-[#378722] pt-24" id="user-profile">Felhasználói Profil</h1>
            <div class="flex bg-[#ECF6EA] p-6 mt-3 rounded-xl border-[#378722] border">
                <div class="flex w-[30%]">
                    <img class="sm:ms-3" src="../../assets/user_page_profile_icon.svg" alt="">
                    <div class="bg-[#378722] w-[1px] h-full ms-8"></div>
                </div>
                <div class="w-[70%] text-center">
                    <div class="font-medium text-2xl xs:text-3xl text-[#378722] cursor-pointer group w-fit mx-auto" [routerLink]="['/profile', username]">
                        <p>{{username}}</p>
                        <div class="border-b-[3px] border-[#378722] transition-all duration-500 w-0 group-hover:w-full"></div>
                    </div>
                    <button class="hidden sm:inline font-medium text-sm text-white bg-[#378722] align-middle w-3/4 lg:w-1/2 py-2 md:py-4 sm:text-base md:text-lg xl:text-xl rounded-xl mt-6" (click)="ChangeEditUserComponentVisibility()">
                        Felhasználói profil szerkesztése
                    </button>
                    <br>
                    <button class="hidden sm:inline font-medium text-sm text-white bg-[#DC2626] align-middle w-3/4 lg:w-1/2 py-2 md:py-4 sm:text-base md:text-lg xl:text-xl rounded-xl mt-6" (click)="DeleteUser()">
                        Felhasználói fiók törlése
                    </button>
                    <div class="inline sm:hidden">
                        <button class="bg-[#378722] p-1 rounded-lg me-2.5">
                            <img class="h-8" src="../../assets/edit_icon.svg" alt="Szerkesztés" (click)="ChangeEditUserComponentVisibility()">
                        </button>
                        <button class="bg-[#DC2626] p-1 rounded-lg">
                            <img class="h-8" src="../../assets/delete_icon.svg" alt="Törlés" (click)="DeleteUser()">
                        </button>
                    </div>
                </div>
            </div>
        }

        @if(this.route.snapshot.url[1] != undefined && this.route.snapshot.url[1].path != this.userService.GetUsername()){        
            <h1 class="text-center pt-24 text-3xl font-semibold text-[#378722]">{{this.route.snapshot.url[1].path}} Profilja</h1>
        }
    
        <p [ngClass]="{'text-3xl font-semibold text-[#378722]': true, 'mt-10' : this.route.snapshot.url[1] == undefined , 'pt-10' : this.route.snapshot.url[1] != undefined }" id="public-recipes">Receptek</p>
        <div class="bg-[#ECF6EA] mt-3 rounded-xl border-[#378722] border py-8">
            @if(this.GetRecipes().length > 0) {
                <div class="grid s:grid-cols-2 lg:grid-cols-3 w-[90%] mx-auto gap-y-10 gap-x-8">
                    @for(recipe of this.GetRecipes(); track recipe.ID) {
                        <app-recipe-card [recipe]="recipe"></app-recipe-card>
                    }   
                </div>
            } @else {
                <p class="text-lg font-medium text-[#378722] ms-5">Ennek a felhasználónak nincs még jóváhagyott receptje! ({{this.route.snapshot.url[1] || this.username}})</p>
            }
        </div>
    </div>
    <app-edit-user></app-edit-user>
}

